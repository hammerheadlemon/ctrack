{% extends "base.html" %}
{% load static %}

{% block title %} Organisations{% endblock %}

{% block content %}

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="application/javascript">
    $(document).ready(function () {
      $('#datatable').DataTable({
        ordering: true,
        searching: true,
        buttons: true,
        dom: 'B<"clear">lfrtip',
        paging: false,
      });
    });
  </script>

  <div class="col-12 m-2">
    <h3>Organisations</h3> <span><a href="{% url "organisations:create" %}">[Create new...]</a></span></h3>
    <div class="row justify-content-center">
      <div class="col-md-12 my-2 py-2">
        <table id="datatable" class="table table-bordered" style="width: 100%">
          <thead>
          <tr>
            <th>Organisation</th>
            <th>Sub-mode</th>
            <th>Lead Inspector</th>
            <th>Point of Contact</th>
          </tr>
          </thead>
          {% for org in organisation_list %}
            <tr>
              <td><a href="{% url "organisations:detail" org.slug %}">{{ org.name }}</a></td>
              <td>{{ org.submode }}</td>
              <td>LEAD INSPECTOR</td>
              <td>
                {% if org.primary_contacts %}
                  <ul style="list-style-type:none; float:left; padding: 0">
                    {% for p in org.primary_contacts %}
                      <li>{{ p }} | {{ p.mobile }}</li>
                    {% endfor %}
                  </ul>
                {% else %}
                  No contact listed
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </table>
      </div>
    </div>
  </div>

{% endblock content %}
