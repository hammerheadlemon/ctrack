{% extends "base.html" %}

{% block title %}
  Create a new Organisation
{% endblock title %}

{% load crispy_forms_tags %}

{% block content %}

  <div class="container mt-3">
    <h4>
      <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-people-fill" fill="currentColor"
           xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd"
              d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
      </svg>
      Create a new organisation
    </h4>
    <div class="row">
      <div class="col-md-8 pt-2 pl-0 my-2 border bg-light">
        <form method="post" action="">
          {% csrf_token %}
          {#   this is the parent form - in this case the organisation form  #}
          <div class="px-3 form-group">
            {{ form.non_field_errors }}
            <label for="{{ form.name.id_for_label }}">Name:</label>
            {{ form.name }}
            <small class="form-text text-muted">{{ form.name.help_text }}</small>
          </div>

          <div class="m-3 form-check">
            {{ form.non_field_errors }}
            {{ form.oes }}
            <label class="form-check-label" for="{{ form.oes.id_for_label }}">OES</label>
            <small class="form-text text-muted">{{ form.oes.help_text }}</small>
          </div>


          <div class="px-3 form-group">
            {{ form.non_field_errors }}
            <label for="{{ form.submode.id_for_label }}">Sub mode:</label>
            {{ form.submode }}
            <small class="form-text text-muted">{{ form.submode.help_text }}</small>
          </div>

          <div class="px-3 form-group">
            {{ form.non_field_errors }}
            <label for="{{ form.designation_type.id_for_label }}">Designation Type:</label>
            {{ form.designation_type }}
            <small class="form-text text-muted">{{ form.designation_type.help_text }}</small>
          </div>

          <div class="px-3 col-md-12 pl-0 my-2form-group">
            {{ form.non_field_errors }}
            <label for="{{ form.registered_company_name.id_for_label }}">Registered Company Name:</label>
            {{ form.registered_company_name }}
            <small class="form-text text-muted">{{ form.registered_company_name.help_text }}</small>
          </div>

          <div class="px-3 form-group">
            {{ form.non_field_errors }}
            <label for="{{ form.registered_company_number.id_for_label }}">Registered Company Number:</label>
            {{ form.registered_company_number }}
            <small class="form-text text-muted">{{ form.registered_company_number.help_text }}</small>
          </div>

          <div class="px-3 form-group">
            {{ form.non_field_errors }}
            <label for="{{ form.comments.id_for_label }}">Comments:</label>
            {{ form.comments }}
            <small class="form-text text-muted">{{ form.comments.help_text }}</small>
          </div>
      </div>
    </div>

    <h5>Address:</h5>

    <div class="row">
      <div class="col-md-8 pt-2 pl-0 my-2 border bg-light">

        {{ addresses.management_form }}
        <table>
          {% for form in addresses %}

            {% if forloop.counter > 1 %}
              <h5 class="px-3">Optional (add an alternative address):</h5>
            {% endif %}

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.type.id_for_label }}">Address Type:</label>
              {{ form.type }}
              <small class="form-text text-muted">{{ form.type.help_text }}</small>
            </div>

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.line1.id_for_label }}">Line 1:</label>
              {{ form.line1 }}
              <small class="form-text text-muted">{{ form.line1.help_text }}</small>
            </div>

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.line2.id_for_label }}">Line 2:</label>
              {{ form.line2 }}
              <small class="form-text text-muted">{{ form.line2.help_text }}</small>
            </div>

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.line3.id_for_label }}">Line 3:</label>
              {{ form.line3 }}
              <small class="form-text text-muted">{{ form.line3.help_text }}</small>
            </div>

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.city.id_for_label }}">City:</label>
              {{ form.city }}
              <small class="form-text text-muted">{{ form.city.help_text }}</small>
            </div>

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.county.id_for_label }}">County:</label>
              {{ form.county }}
              <small class="form-text text-muted">{{ form.county.help_text }}</small>
            </div>

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.postcode.id_for_label }}">Postcode:</label>
              {{ form.postcode }}
              <small class="form-text text-muted">{{ form.postcode.help_text }}</small>
            </div>

            <div class="px-3 form-group">
              {{ form.non_field_errors }}
              <label for="{{ form.country.id_for_label }}">Country:</label>
              {{ form.country }}
              <small class="form-text text-muted">{{ form.country.help_text }}</small>
            </div>
          {% endfor %}
          <div class="my-3 col-md-12">
            <input class="btn btn-primary" type="submit" value="Submit">
            <a href="{% url "organisations:list" %}" class="btn btn-danger">Cancel</a>
          </div>
        </table>
        </form>
      </div>
    </div>
  </div>

{% endblock %}



